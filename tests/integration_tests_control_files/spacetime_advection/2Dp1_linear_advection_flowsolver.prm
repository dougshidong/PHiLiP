# -------------------

#set run_type = flow_simulation
set test_type = stability_fr_parameter_range

# Number of SPATIAL dimensions
set dimension = 2
# Number of TEMPORAL dimensions
set temporal_dimension = 1

set use_weak_form = true

set overintegration = 0

#set flux_nodes_type = GL

set use_split_form = false

# TO DO think about how this should be set
set use_periodic_bc = true

set use_inverse_mass_on_the_fly = false
set flux_reconstruction = user_specified_value

# The PDE we want to solve
set pde_type = advection

set conv_num_flux = lax_friedrichs
#set conv_num_flux = upwind
#
set use_weight_adjusted_mass = false

subsection ODE solver

  set ode_output = verbose
  
  #set nonlinear_max_iterations = 500
  set nonlinear_max_iterations = 50000
  set nonlinear_max_iterations = 100
  set nonlinear_steady_residual_tolerance = 1e-8

  set print_iteration_modulo = 100
 # set print_iteration_modulo = 1

  set ode_solver_type = implicit

  set output_solution_every_x_steps = 1

  set initial_time_step = 1

  set runge_kutta_method = rk4_ex

end

subsection time_refinement_study
  set number_of_times_to_solve = 2
  set refinement_ratio = 0.5
end

subsection manufactured solution convergence study
  set advection_0 = 0.3
  set advection_1 = 0.4
  set number_of_grids = 2
end

subsection flow_solver
  set flow_case_type = spacetime_cartesian
  set steady_state = true
  set poly_degree = 2
  subsection grid
    set grid_left_bound = 0.0
    set grid_right_bound = 2.0
    set number_of_grid_elements_per_dimension = 4
  end
  set final_time = 0.004 #small such that we don't actually take a step
  subsection ESFR_parameter_tests
    set number_ESFR_parameter_values = 2
    set ESFR_parameter_values_start = 1.0e-4
    set ESFR_parameter_values_end = 1.0e4
  end
end

